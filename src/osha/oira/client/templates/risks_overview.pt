<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:meta="http://xml.zope.org/namespaces/meta"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      meta:interpolation="true"
      i18n:domain="euphorie"
      id="account-settings"
      tal:define="client nocall:request/client; webhelpers nocall:context/@@webhelpers"
      metal:use-macro="context/@@plain/macros/shell">

<body>
<metal:content fill-slot="content">
    <div class="statuses" tal:define="status python:view.status; status_view nocall:context/aq_parent/@@status">

        <metal:macro use-macro="status_view/macros/title_block" />

        <metal:macro use-macro="status_view/macros/page_toc" />

        <metal:macro use-macro="status_view/macros/status_modules" tal:define="legend_columns string:twelve">
            <metal:slot fill-slot="risk-list"
                    tal:define="risks_by_status python:view.risks_by_status[module.get('path')];
                                num_high python:len(risks_by_status['present']['high']);
                                num_medium python:len(risks_by_status['present']['medium']);
                                num_low python:len(risks_by_status['present']['low']);
                                num_present python:num_high + num_medium + num_low;
                                num_possible python:num_postponed + num_todo;">
            <div class="six columns">
                <h3 i18n:translate="heading_present_risks"><span i18n:name="num_present_risks">${num_present}</span> Present Risks</h3>
                <tal:prio tal:repeat="priority python:['high', 'medium', 'low']">
                <div class="high-prio-risks" tal:define="risks python:risks_by_status['present'][priority]" tal:condition="risks">
                    <h4 i18n:translate="heading_num_high_prio_risks" tal:condition="python:priority == 'high'"><span i18n:name="num_high_risks">${num_high}</span> High priority risks</h4>
                    <h4 i18n:translate="heading_num_medium_prio_risks" tal:condition="python:priority == 'medium'"><span i18n:name="num_medium_risks">${num_medium}</span> Medium priority risks</h4>
                    <h4 i18n:translate="heading_num_low_prio_risks" tal:condition="python:priority == 'low'"><span i18n:name="num_low_risks">${num_low}</span> Low priority risks</h4>
                    <ul>
                        <li tal:repeat="risk risks">
                            <a href="${risk/path}">${risk/title}</a> <span tal:condition="risk/has_measures">(â‰¥1 measures)</span><span tal:condition="not:risk/has_measures">(without measures)</span>
                        </li>
                    </ul>
                </div>
                </tal:prio>
            </div>

            <div class="six columns">
                <h3 i18n:translate="heading_possible_risks"><span i18n:name="num_possible_risks">${num_possible}</span> Possible Risks</h3>
                <tal:prio tal:repeat="status python:['postponed', 'todo']">
                <div class="high-prio-risks" tal:define="risks python:risks_by_status['possible'][status]" tal:condition="risks">
                    <h4 i18n:translate="heading_num_postponed_prio_risks" tal:condition="python:status == 'postponed'"><span i18n:name="num_postponed_risks">${num_postponed}</span> Risks postponed</h4>
                    <h4 i18n:translate="heading_num_todo_prio_risks" tal:condition="python:status == 'todo'"><span i18n:name="num_todo_risks">${num_todo}</span> Risks not answered</h4>
                    <ul>
                        <li tal:repeat="risk risks">
                            <a href="${risk/path}">${risk/title}</a>
                        </li>
                    </ul>
                </div>
                </tal:prio>
            </div>
            </metal:slot>
        </metal:macro>
    </div>
<tal:block replace="tile:client-analytics"/>
</metal:content>
</body>
</html>
