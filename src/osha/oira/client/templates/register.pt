<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:meta="http://xml.zope.org/namespaces/meta"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      i18n:domain="euphorie"
      id="register"
      meta:interpolation="true"
      tal:define="webhelpers nocall:context/@@webhelpers;
                  tools nocall:context/@@tools;
                  client nocall:request/client"
      metal:use-macro="context/@@shell/macros/shell">

<body>
<metal:slot fill-slot="content" tal:define="is_guest_account webhelpers/is_guest_account">
    <tal:block replace="tile:statusmessages"/>
    <article>
      <h1 i18n:translate="header_register">Register</h1>
    </article>

    <p class="message error" tal:condition="view/error|nothing">${view/error}</p>

    <form enctype="multipart/form-data" accept-charset="UTF-8" method="post" tal:define="errors view/errors" action="${request/URL}">
      <input type="hidden" name="came_from" tal:condition="request/came_from|nothing" value="${request/came_from}"/>
      <fieldset class="vertical">
        <tal:guest_account condition="is_guest_account|nothing">
            <input type="hidden" name="guest_session_id" tal:attributes="value webhelpers/guest_session_id"/>
        </tal:guest_account>
        <label class="${python:'error' if 'email' in errors else None}"><tal:span i18n:translate="label_email">Email address</tal:span> <input class="email" autofocus="autofocus" type="email" name="email" value="${request/email|nothing}"/>
          <em class="message warning" tal:condition="exists:errors/email" tal:content="errors/email">Invalid login name</em></label>
        <label class="${python:'error' if 'password' in errors else None}"><tal:span i18n:translate="label_new_password">Desired password</tal:span> <input class="password" type="password" name="password1:utf8:ustring" />
          <em class="message warning" tal:condition="exists:errors/password" tal:content="errors/password">Invalid password</em></label>
        <label><tal:span i18n:translate="label_password_confirm">Again password</tal:span> <input class="password" type="password"  name="password2:utf8:ustring"/> </label>
      </fieldset>
      <p class="buttonBar">
        <button type="submit" name="next" value="previous" i18n:translate="label_previous" class="pat-button">Previous</button>
        <button type="submit" name="next" value="next" i18n:translate="label_next" class="pat-button">Next</button>
      </p>
    </form>

    <tal:block replace="tile:client-analytics"/>
  </metal:slot>
  </body>
</html>
